FROM python:3
WORKDIR /usr/src/app
COPY ./requirements.publish.txt ./
COPY ./ ./
RUN pip install --no-cache-dir -r requirements.publish.txt
RUN python setup.py sdist bdist_wheel
RUN -m twine upload --repository-url twine upload --repository-url https://test.pypi.org/legacy/ dist/*